<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<script type="text/javascript">
  		//校验百分数 
		function isPercentage() 
		{ 
			var s = document.getElementById('percentage').value ;
			var patrn=/^(100|[1-9]?[0-9](\.[1-9])?)$/; 
			alert(patrn.exec(s)) ;
			if (!patrn.exec(s)) return false 
			return true 
		} 
		//校验百分数
		function isPercentage1() 
		{ 
			var s = document.getElementById('percentage').value ;
			var patrn=/^(100|[1-9]?[0-9](\.[1-9])?)$/g; 
			alert(s.match(patrn)) ;
		} 
		
		/**
		 * 验证完成百分比
		 */
		function validatePercentage(src) {
			var num = document.getElementById("percentage").value;
			var PNumPatrn = /^\d+(\.\d+)?$/ ;
			var areaPatrn = /^(100|[1-9]?[0-9](\.[1-9])?)$/;
			var percentagePatrn = /%$/;
			if(PNumPatrn.test(num)){
				var numRound = pointAndOne(num) ;
				if(!areaPatrn.test(numRound)){
					alert('请输入0-100之间的数字。') ;
					return false ;
				}else{
					alert(numRound) ;
					return true ;
				}
			}else{
				if(percentagePatrn.test(num)){
					num = num.substring(0,num.indexOf('%')) ;
					var numRound = pointAndOne(parseFloat(num)) ;
					if(!areaPatrn.test(numRound)){
						alert('请输入0-100之间的数字。') ;
						return false ;
					}else{
						alert(numRound) ;
						return true ;
					}
				}else{
					alert('请输入0-100之间的数字。') ;
					return false ;
				}
			}
		}
		
		/**
		 * 四舍五入，保留一位小数
		 */
		function pointAndOne(num) {
			var returnNum = 10*num ;
			returnNum = Math.round(returnNum) ;
			returnNum = returnNum/10 ;
			return returnNum ;
		}
  	</script>
		<title>string.html</title>

		<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
		<meta http-equiv="description" content="this is my page">
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">

		<!--<link rel="stylesheet" type="text/css" href="./styles.css">-->

	</head>

	<body>
		<table id="operatortable">
			<tr>
				<td>
					<input type="text" id="percentage"/>
					<input onclick="validatePercentage()" type="button" id="validatePercentage" name="validatePercentage"
						value="validatePercentage"
						style="background: white url(../../img/submit.gif) no-repeat center;" />
				</td>
			</tr>
		</table>
	</body>
</html>
